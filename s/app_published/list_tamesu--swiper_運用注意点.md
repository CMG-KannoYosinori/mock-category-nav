# カテゴリナビ（Swiper）運用注意点

`list_tamesu--swiper.html` で使用している、メニュー（タブ）とコンテンツ（カード）が連動する Swiper の運用時の注意点です。

---

## 1. メニューとコンテンツの「数」を揃える

- **メニュー（`.mySwiper2`）のスライド数** と **コンテンツ（`.mySwiper3`）のスライド数** は **同じ** にしてください。
- Controller はインデックスで同期するため、数が違うと次のような不具合になります。
  - メニューが多い場合：後ろのタブを選んだときに、対応するコンテンツがなく表示がずれる
  - コンテンツが多い場合：一部のコンテンツがメニューから選べず、スワイプでしか見られない
- カテゴリを増減する場合は、メニュー用・コンテンツ用のデータを **同じ件数・同じ並び** で出力するようにしてください。

---

## 2. メニューとコンテンツの「順番」を揃える

- **メニューの並び順** と **コンテンツの並び順** は **一致** させてください。
- 同期は「0番目同士」「1番目同士」という対応のため、順番が違うとタブと表示内容がずれます。

| メニュー（例）     | コンテンツ（対応）     |
|-------------------|------------------------|
| 1. 総合           | 1. 総合のカード一覧    |
| 2. 食品           | 2. 食品のカード一覧    |
| 3. ドリンク/お酒  | 3. ドリンク/お酒の…   |
| …                 | …                      |

- データで管理する場合は、**1つのカテゴリリスト**からメニュー用HTMLとコンテンツ用HTMLを同じ順で生成すると安全です。

---

## 3. HTML 構造の前提

- メニューとコンテンツは **1組ずつ** `.top-c-cards-container` の中にまとめてください。
- 1ページに複数の `.top-c-cards-container` がある場合、**それぞれの組**で Swiper が初期化され、メニュー⇔コンテンツの連動が有効になります。
- 各コンテナ内に `.mySwiper2`（メニュー用）と `.mySwiper3`（コンテンツ用）が **1つずつ** あることを前提としています。

---

## 4. このページ専用スタイルのスコープ（CSS）

- このページ用のスタイル（`list_tamesu--swiper.css`）は、**このページにだけ**効くようにスコープされています。
- **HTML:** `<body>` にクラス `list_tamesu` を付与しています（`<body class="list_tamesu">`）。
- **CSS:** 上記 CSS 内のセレクタはすべて `.list_tamesu` の子孫に限定されています。
- **読み込み:** `list_tamesu--swiper.css` は、**このページ（list_tamesu）を適用するページでのみ**読み込んでください。他ページでは読み込まないようにしてください。
- 同じ CSS を他ページでも読み込む場合、`body` に `list_tamesu` がないページではスタイルが当たらないため、他ページへの影響を避けられます。**このページを組み込む際は、必ず `body` に `list_tamesu` を付けてください。**

---

## 5. 動作の概要

- **メニューをスワイプ／タブをクリック** → 対応するコンテンツがスライドします。
- **コンテンツをスワイプ** → 対応するメニュー（タブ）がスライドします。
- ループは有効です。`loopedSlides` はメニューのスライド数に合わせて自動設定されています。
- タブ切り替え（タメせる／メディタメ）の制御は **Vanilla JS（jQuery 非依存）** で実装されています。

---

## 6. トラブル時の確認項目

| 確認項目                         | 内容 |
|----------------------------------|------|
| メニューとコンテンツの数         | 両方の `.swiper-slide` の数が同じか |
| メニューとコンテンツの順番       | 同じカテゴリが同じインデックスか   |
| 複数ブロックがある場合           | 各 `.top-c-cards-container` 内に .mySwiper2 と .mySwiper3 が1つずつあるか |
| Swiper の読み込み                | `swiper-bundle.min.js` が読み込まれているか |

---

*Swiper 8 / Controller による双方向連動を利用しています。*
